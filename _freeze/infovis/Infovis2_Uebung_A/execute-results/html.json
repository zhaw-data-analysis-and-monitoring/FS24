{
  "hash": "3b36803a2994f11ee8d5dba732510c15",
  "result": {
    "engine": "knitr",
    "markdown": "---\ndate: 2024-03-26\nlesson: InfoVis2\ntopic: Advanced ggplot\nindex: 1\nexecute:\n  echo: false   # set to true to show the sample solution\n  output: false # set to true to show the sample solution\ncode-fold: true\ncode-summary: \"Sample Solution\"\nknitr:\n  opts_chunk:\n    collapse: true\n---\n\n\n# Infovis 2: Exercise A\n\nFor today’s exercise, you will need the dataset *temperature_2005.csv* ({{<var datasets.InfoVis2>}}). This dataset contains temperature readings from various weather stations, this time from the year 2005. The date is formatted in such a way that R (specifically `read_delim`) should correctly recognise it as `datetime` and read it as `POSIXct`.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(\"readr\")\nlibrary(\"dplyr\")\nlibrary(\"lubridate\")\nlibrary(\"tidyr\")\nlibrary(\"ggplot2\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ntemperature <- read_delim(\"datasets/infovis/temperature_2005.csv\", \",\")\n```\n:::\n\n\n## Task 1\n\nTransform the *wide table* into a *long table* using the following code.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ntemperature_long <- pivot_longer(\n  data = temperature, \n  cols = -time, \n  names_to = \"station\", \n  values_to = \"temperature\"\n  )\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|time       |station | temperature|\n|:----------|:-------|-----------:|\n|2005-01-01 |ALT     |         1.3|\n|2005-01-01 |BUS     |         1.5|\n|2005-01-01 |GVE     |         1.1|\n|2005-01-01 |INT     |         0.2|\n|2005-01-01 |OTL     |         2.2|\n|2005-01-01 |LUG     |         1.7|\n\n\n:::\n:::\n\n\n\nNext, import the dataset *temperature_2005_metadata.csv* and join the two datasets with a `left_join` via `station` (or `stn`).\n\n\n::: {.cell}\n\n:::\n\n\n## Task 2\n\nCreate a scatter plot (`time` vs. `temperature`) where the points are coloured based on their sea level. Lower values should be coloured blue and higher values red (`scale_colour_gradient`). Reduce the size of the points to avoid excessive over-plotting of the points (`size =`). Furthermore, the respective month should be noted on the x-axis at intervals of 3 months (`date_breaks` and `date_labels` from `scale_x_datetime()`).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Task 3\n\nCreate an additional `Date` variable with the date of the respective measurement (with `as.Date()`). Use this column to calculate the average daily temperature at each weather station (with `summarise()`).\n\nTo keep the metadata (`Name`, `Meereshoehe`, `x`, `y`), you can perform the join from the first exercise again. Alternatively (faster but also more advanced), you can use these variables within your `group_by`.\n\n\n::: {.cell}\n\n:::\n\n\n## Task 4\n\nNow repeat the plot from the first task with the aggregated data from the previous task. To set the labels correctly, you need to replace `scale_x_datetime` with `scale_x_date`.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## Task 5\n\nAdd a black, dashed trend line to the plot above (`geom_smooth()`).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## Task 6\n\nPosition the legend above the plot (use `theme()` with `legend.position`).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n## Task 7\n\nNow, let's move away from the scatter plot and create a box plot with the temperature data. Colour the box plots again depending on the sea level.\n\n- Note the difference between `colour =` and `fill =`\n- Note the difference between `facet_wrap()` and `facet_grid()`\n- Remember,` facet_grid()` requires a period (`.`) next to the tilde (`~`).\n\n- Note the difference between \"`.~`\" and \"`~.`\" in `facet_grid()`\n- Adjust the position of the legend as needed\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Task 8\n\nAs a final important plot type, let’s complete two exercises with histograms. First, create a histogram `geom_histogram()` with the temperature values, then allocate the weather stations to different altitude levels (Low altitude [[< 400 m]], Mid altitude [[400 - 600 m]] and High altitude [[> 600 m]]). Finally, compare the distribution of temperature values at the different altitudes using a histogram.\n\nTip: Use `cut` to divide the stations into the three groups\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Infovis2_Uebung_A_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Infovis2_Uebung_A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}